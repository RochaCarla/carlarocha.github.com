<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Programação Funcional - Gustavo Pinto</title>
<meta name="description" content="Soft Eng Professor and Researcher ">


  <meta name="author" content="Gustavo Pinto">


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Gustavo Pinto">
<meta property="og:title" content="Programação Funcional">
<meta property="og:url" content="http://localhost:4000/ruby-guide/fp">


  <meta property="og:description" content="Soft Eng Professor and Researcher ">





  <meta name="twitter:site" content="@gustavopinto">
  <meta name="twitter:title" content="Programação Funcional">
  <meta name="twitter:description" content="Soft Eng Professor and Researcher ">
  <meta name="twitter:url" content="http://localhost:4000/ruby-guide/fp">

  
    <meta name="twitter:card" content="summary">
    
  

  







  

  


<link rel="canonical" href="http://localhost:4000/ruby-guide/fp">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Gustavo Pinto",
      "url": "http://localhost:4000/",
      "sameAs": "https://twitter.com/gustavopinto/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Gustavo Pinto Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Gustavo Pinto
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/books/">Books</a>
            </li><li class="masthead__menu-item">
              <a href="/publications/">Publications</a>
            </li><li class="masthead__menu-item">
              <a href="/blog/">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/students/">Students</a>
            </li><li class="masthead__menu-item">
              <a href="/teaching/">Teaching</a>
            </li><li class="masthead__menu-item">
              <a href="/reading/">Reading</a>
            </li><li class="masthead__menu-item">
              <a href="/misc/">Misc</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/lost+found/ghlp4.png" alt="Gustavo Pinto" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Gustavo Pinto</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Software Engingeering Researcher</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Belém, Brazil</span>
        </li>
      

      
        
          
            <li><a href="https://gustavopinto.org" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://twitter.com/gustavopinto" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
        
          
            <li><a href="https://github.com/gustavopinto" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:gpinto@ufpa.br">
            <meta itemprop="email" content="gpinto@ufpa.br" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Programação Funcional">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Programação Funcional
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><a href="/ruby-guide">Voltar ao começo do guia</a></p>

<p>Principais características do paradigma funcional:</p>

<ol>
  <li>Imutabilidade</li>
  <li>Funções puras</li>
  <li>Funções de anonimas</li>
  <li>Funções de alta ordem</li>
  <li>Transparência referencial</li>
  <li>Memoização</li>
  <li>Idepontencia</li>
  <li>Currying</li>
  <li>Avaliação preguiçosa</li>
</ol>

<h2 id="imutabilidade">Imutabilidade</h2>

<p>Um dos principais conceitos de programação funcional é a idéia de que estados são imutáveis. Mas o que isso quer dizer? Em princípio, isso significa que uma vez um valor é atribuído a uma variável, não é pode fazer uma reatribuição de valor para esta variável. Logo,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># houve uma mudança no estado da variável x</span>
</code></pre></div></div>

<p>Em uma linguagem de funcional dita como pura, essa re-atribuição de variável lancçaria um erro. No entanto, é possível em Ruby. Como a linguagem não fornece mecanismos para forçar imutabilidade por padrão, fica como uma boa prática para desenvolvedores exercitarem.</p>

<h2 id="funções-puras">Funções puras</h2>

<p>Métodos também podem mudar o estado de variáveis. Por exemplo:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="nf">reject</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">a</span>   <span class="c1"># =&gt; [1, 2, 3]</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="nf">reject!</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">a</span>   <span class="c1"># =&gt; [1, 2]</span>
</code></pre></div></div>

<p>Podemos perceber que o comportamento do <code class="highlighter-rouge">reject!</code> é diferente do <code class="highlighter-rouge">reject</code>, pois o primeiro muda o valor da variável <code class="highlighter-rouge">a</code> enquanto que o segundo não muda (este, na realidade, devolve um novo array com os elementos necessários). Como estudamos no capítulo sobre métodos, em Ruby usamos como convenção uma exclamação (<code class="highlighter-rouge">!</code>) ao fim do nome do método, quando queremos passar um aviso de <em>cuidado</em> ao desenvolvedor. Um dos motivos desse cuidado é que estes métodos alterarem o comportamento da variável a qual eles operam. Mas, novamente, <em>cuidado</em>. Há vários métodos em Ruby que mudam estado e não necessáriamente tem uma exclamação no seu nome. Exemplos incluem os métodos, shift, pop, clear, delete (e vários outros) da classe Array.</p>

<p>O primeiro passo para programação funcional em Ruby é conhecer quais métodos manipulam estado de variáveis.</p>

<h3 id="quais-sãos-os-problemas-de-estados-mutaveis">Quais sãos os problemas de estados mutaveis?</h3>

<p>Funções puras são aquelas que não mudam o estado de uma variável. Ou seja, dado uma determinada entrada, uma função pura deve</p>

<h2 id="funções-anônimas">Funções anônimas</h2>

<p>Funções anônimas, como o nome mesmo sugere, são funções que não tem um nome não foi (nem será) definido. Uma função com nome pode ser descrita da seguinte forma:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">ola</span>
  <span class="nb">puts</span> <span class="s2">"oi pessoal"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>E chamando o nome da função, <code class="highlighter-rouge">ola</code>, obtemos como saída a string <code class="highlighter-rouge">oi pessoal</code>. Uma função anônima com comportamento similar, pode ser feita da seguinte forma:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">meu_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">"oi pessoal"</span> <span class="p">}</span>
</code></pre></div></div>

<p>Perceba que a declaração da função começa na palavra reservada <code class="highlighter-rouge">lambda</code>, e a referência para a função é aramazenada na varíavel <code class="highlighter-rouge">meu_lambda</code>. Ou seja, uma chamada ao <code class="highlighter-rouge">meu_lambda</code> retorna somente a referência para a função anômia, e não a executa (como talvez fosse o esperado). Para de fato executa-a, precisamos chamar o método <code class="highlighter-rouge">call</code>, da seguinte forma:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">meu_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">"oi pessoal"</span> <span class="p">}</span>

<span class="n">meu_lambda</span>        <span class="c1"># =&gt; #&lt;Proc:0x00005563f10ec298 (irb):6 (lambda)&gt;</span>

<span class="n">meu_lambda</span><span class="p">.</span><span class="nf">call</span>   <span class="c1"># =&gt; oi pessoal</span>
</code></pre></div></div>

<p>Como qualquer função, é possível também passar parâmetros para que sejam executados dentro da função.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">meu_lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">nome</span><span class="o">|</span>  <span class="nb">puts</span> <span class="s2">"oi </span><span class="si">#{</span><span class="n">nome</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>

<span class="n">meu_lambda</span><span class="p">.</span><span class="nf">call</span> <span class="s2">"Gustavo"</span>   <span class="c1"># =&gt; oi Gustavo</span>
</code></pre></div></div>

<p>Percebam que o conteúdo de um lambda é definido por um bloco (note as chaves (<code class="highlighter-rouge">{}</code>) no começo e no fim do método), e não por um <code class="highlighter-rouge">def</code> e um <code class="highlighter-rouge">end</code>.  Isso acontece pois lambdas são implementados como blocos em Ruby. No entanto, não são os mesmos tipos de blocos que vimos no capítulo sobre métodos. Em Ruby, lambdas são implementações do tipo <code class="highlighter-rouge">Proc</code>, por isso que recebemos o valor <code class="highlighter-rouge">Proc:0x00005563f10ec298</code> ao imprimir a referência do objeto que guarda nossa variável <code class="highlighter-rouge">meu_lambda</code>. Um <code class="highlighter-rouge">Proc</code> difere de um bloco simplesmente pois objetos do tipo <code class="highlighter-rouge">Proc</code> podem ser armazenados em uma variável.</p>

<p>Por fim, perceba que <code class="highlighter-rouge">lambda</code>, em Ruby, é apenas um alias para <code class="highlighter-rouge">proc</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">meu_proc</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s2">"oi pessoal"</span> <span class="p">}</span>
<span class="n">meu_proc</span><span class="p">.</span><span class="nf">call</span>  <span class="c1"># =&gt; oi pessoal</span>

<span class="n">meu_proc</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span><span class="o">|</span><span class="n">nome</span><span class="o">|</span>  <span class="nb">puts</span> <span class="s2">"oi </span><span class="si">#{</span><span class="n">nome</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="n">meu_proc</span><span class="p">.</span><span class="nf">call</span> <span class="s2">"Gustavo"</span>   <span class="c1"># =&gt; oi Gustavo</span>
</code></pre></div></div>

<h2 id="funções-de-alta-ordem">Funções de alta ordem</h2>

<p>Com lambdas, linguagens funcionais ganham uma nova características, chamada funções de alta ordem. Essa característica permite que funções possam ser armazenadas em variáveis do programa, que percebemos ao fazermos nosso primeiro exemplo usando o <code class="highlighter-rouge">meu_lambda</code>. Se uma função pode ser armazenada em uma variável, podemos também passar a função por parâmetro para outro método. Por exemplo:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Salario</span>

	<span class="k">def</span> <span class="nf">initialize</span>
		<span class="vi">@salario</span> <span class="o">=</span> <span class="mi">1000</span>
		<span class="vi">@bonificacao</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">salario</span><span class="o">|</span> <span class="n">salario</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">}</span>
	<span class="k">end</span>

	<span class="k">def</span> <span class="nf">calcular</span>
		  <span class="vi">@salario</span> <span class="o">+=</span> <span class="vi">@bonificacao</span><span class="p">.</span><span class="nf">call</span> <span class="vi">@salario</span>
	<span class="k">end</span>
<span class="k">end</span>

<span class="n">salario</span> <span class="o">=</span> <span class="no">Salario</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">puts</span> <span class="n">salario</span><span class="p">.</span><span class="nf">calcular</span>
</code></pre></div></div>

<p>Da mesma forma que podemos passar funções como parâmetros, podemos também retornar funções de outras funções.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">gerador_de_lambdas</span><span class="p">(</span><span class="n">multiplicador</span><span class="p">)</span>
    <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="n">num</span> <span class="o">*</span> <span class="n">multiplicador</span> <span class="p">}</span>
<span class="k">end</span>

<span class="n">vezes_tres</span> <span class="o">=</span> <span class="n">gerador_de_lambdas</span> <span class="mi">3</span>

<span class="nb">puts</span> <span class="n">vezes_tres</span><span class="p">.</span><span class="nf">call</span> <span class="mi">4</span>
</code></pre></div></div>

<h2 id="recursão">Recursão</h2>

<h2 id="currying">Currying</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">greet</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="nb">name</span><span class="o">|</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="n">greet</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="s1">'World'</span><span class="p">)</span>
<span class="c1"># =&gt; "Hello World"</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">generic_greet</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">greeting</span><span class="p">,</span> <span class="nb">name</span><span class="o">|</span> <span class="s2">"</span><span class="si">#{</span><span class="n">greeting</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="n">generic_greet</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="s1">'Hi'</span><span class="p">,</span> <span class="s1">'SengMing'</span><span class="p">)</span>
<span class="c1"># =&gt; "Hi SengMing"</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">curried_generic_greet</span> <span class="o">=</span> <span class="n">generic_greet</span><span class="p">.</span><span class="nf">curry</span>
<span class="n">curried_generic_greet</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="s1">'Ahoy'</span><span class="p">).</span><span class="nf">call</span><span class="p">(</span><span class="s1">'SengMing'</span><span class="p">)</span>
<span class="c1"># =&gt; "Ahoy SengMing"</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hi_greet</span> <span class="o">=</span> <span class="n">curried_generic_greet</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="s1">'Hi'</span><span class="p">)</span>
<span class="n">hi_greet</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="s1">'SengMing'</span><span class="p">)</span>
<span class="c1"># =&gt; "Hi SengMing"</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="gustavopinto" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="gustavopinto" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Gustavo Pinto. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
