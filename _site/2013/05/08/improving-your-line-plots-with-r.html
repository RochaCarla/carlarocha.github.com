<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

  <!-- Basic Page Needs
  ================================================== -->
  <meta charset="utf-8">
  <title>Improving our line plots with R</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- RSS
  ================================================== -->
  <link href="http://gsutavopinto.org/feed.xml" rel="alternate" type="application/rss+xml" title="Gustavo Pinto" />

  <!-- Mobile Specific Metas
  ================================================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- CSS
  ================================================== -->
  <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700'
    rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css2.1.5/base.css">
  <link rel="stylesheet" href="/css2.1.5/skeleton.css">
  <link rel="stylesheet" href="/css2.1.5/layout.css">
  <!--<link rel="stylesheet" href="/css2.1.4/tomorrow.css">-->
  <link rel="stylesheet" href="/css2.1.5/syntax2.css">

  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Favicons
  ================================================== -->
  <link rel="shortcut icon" href="/images/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

  <!-- Typekit
  ================================================== -->
  <script type="text/javascript" src="//use.typekit.net/gki1atw.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

  <!-- Lightbox
  ================================================== -->
  <script src="/js/jquery-1.10.2.min.js"></script>
  <script src="/js/lightbox-2.6.min.js"></script>
  <link href="/css2.1.5/lightbox.css" rel="stylesheet" />

  <!-- Altmetric
  ================================================== -->
  <script type='text/javascript' src='https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js'></script>

  <!-- MathJax
  ================================================== -->
  <script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

</head>

<body>

  <!-- Primary Page Layout
  ================================================== -->

  <div class="container">
    <div class="offset-by-three">
    <div class="ten columns">
      <div class="masthead">
        <div class="sean">
         <a href="/">Gustavo Pinto</a>
        <br />
      </div>
        <a href="/">About</a>
        <span class="mastdiv">/</span>
        <a href="/publications">Publications</a>
        <span class="mastdiv">/</span>
        <!--<span class="mastdiv">/</span>-->
        <!--<a href="/portfolio.html">Figures</a>-->
        <!--<a href="/cv.html">CV</a>
        <span class="mastdiv">/</span>
        <a href="https://github.com/seananderson">Code</a>
        <span class="mastdiv">/</span>
        <a href="/portfolio.html">Figures</a>
        <span class="mastdiv">/</span>
        <span class="mastdiv">/</span>
        <a href="http://twitter.com/gustavopinto">Twitter</a>-->
        <a href="/blog.html">Blog</a>
        <span class="mastdiv">/</span>
        <a href="/contact.html">Contact</a>
      </div>


<span class="date">May  8, 2013</span>
  <h1 class="post-title"><a href="/2013/05/08/improving-your-line-plots-with-r.html">Improving our line plots with R</a></h1>
  <p>Hi there.</p>

<p>As you may know, I&#39;m a graduate student and part of my work is spent on writing papers. And, frequently, these papers contains a lot of charts. As long as I&#39;m a graduate student, I&#39;m very disapointed with the charts that open-office plots. Specially, the line charts. It is kinda a four-years-old-children playing with their paint and brush. Do not believe? Take a look.</p>

<p><img src='/images/post2/usage-per-thread.png'/></p>

<p>It is terrible.</p>

<p>So, yesterday I really decided to revert this game. Surfing on the internet, I read some people writing that R is outstanding to ploting charts, which I had serious doubts, mainly because I have been using R for a long time. But, most of the time is to plot boxplot, or to use few functions such as <code>summary</code>, <code>sd</code>, <code>cor</code>, among more two or three. Not less, not more. In my (naive) imagination, R should had a function like <code>plotanincrediblechart</code>, and I only should pass the data array. But R does not have this function. In fact, R has a number of functions, and, when you play with they together, you can get a nice chart like the this one.</p>

<p><img src='/images/post2/usage-per-thread-r.png'/></p>

<p>Much better, uh?</p>

<p>So, how can you do this?</p>

<h1 id="first">First</h1>

<p>Let&#39;s start by initializing your data array. If you do not have basic knowledge in R, <a href="http://cran.r-project.org/doc/contrib/Paradis-rdebuts_en.pdf">this article</a> is a good start point.</p>
<div class="highlight"><pre><code class="language-R" data-lang="R">seq <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">78</span><span class="p">,</span> <span class="m">78</span><span class="p">,</span> <span class="m">78</span><span class="p">,</span> <span class="m">78</span><span class="p">)</span>
thread <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">80</span><span class="p">,</span> <span class="m">60</span><span class="p">,</span> <span class="m">55</span><span class="p">,</span> <span class="m">42</span><span class="p">)</span>
executors <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">80</span><span class="p">,</span> <span class="m">56</span><span class="p">,</span> <span class="m">42</span><span class="p">,</span> <span class="m">31</span><span class="p">)</span>
forkJoin <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">79</span><span class="p">,</span> <span class="m">55</span><span class="p">,</span> <span class="m">52</span><span class="p">,</span> <span class="m">54</span><span class="p">)</span>
actors <span class="o">&lt;-</span><span class="kt">c</span><span class="p">(</span><span class="m">82</span><span class="p">,</span> <span class="m">47</span><span class="p">,</span> <span class="m">38</span><span class="p">,</span> <span class="m">30</span><span class="p">)</span>
</code></pre></div>
<h1 id="second">Second</h1>

<p>Create a simple line chart with one of your data set using the <code>plot</code> function. In this case, I used the <code>thread</code> var.</p>
<div class="highlight"><pre><code class="language-R" data-lang="R">plot<span class="p">(</span>thread<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> col<span class="o">=</span><span class="s">&quot;blue&quot;</span><span class="p">,</span> pch<span class="o">=</span><span class="m">18</span><span class="p">,</span> ylim<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">100</span><span class="p">))</span>
</code></pre></div>
<p>In this function, we passed the <code>thread</code> var and more four arguments. They are:</p>

<ul>
<li><code>type</code>: the plot type;</li>
<li><code>col</code>: the line color (see <a href="http://research.stowers-institute.org/efg/R/Color/Chart/ColorChart.pdf">here</a> to see all colors avaiable in R);</li>
<li><code>pch</code>: the vector of plotting characters or symbols;</li>
<li><code>ylim</code>: the y limits of the plot;</li>
</ul>

<p>There are several other parameters that you can use in your chart. If you have the time, take a lot at the <a href="http://stat.ethz.ch/R-manual/R-devel/library/graphics/html/plot.default.html">official documentation</a>.</p>

<p>Now, we have to add the remaining data. To do so, we will use another function called <code>lines</code>. In this example, we pass five arguments to this function. Note that these arguments are the same ones that we have passed to the <code>plot</code> function. Therefore, for each new vector that you want to plot, you have to add a new line, such as follows:</p>
<div class="highlight"><pre><code class="language-R" data-lang="R">lines<span class="p">(</span><span class="kp">seq</span><span class="p">,</span> type<span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> pch<span class="o">=</span><span class="m">23</span><span class="p">,</span> lty<span class="o">=</span><span class="m">1</span><span class="p">,</span> col<span class="o">=</span><span class="s">&quot;darkred&quot;</span><span class="p">)</span>
lines<span class="p">(</span>executors<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> pch<span class="o">=</span><span class="m">24</span><span class="p">,</span> lty<span class="o">=</span><span class="m">1</span><span class="p">,</span> col<span class="o">=</span><span class="s">&quot;purple&quot;</span><span class="p">)</span>
lines<span class="p">(</span>forkJoin<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> pch<span class="o">=</span><span class="m">25</span><span class="p">,</span> lty<span class="o">=</span><span class="m">1</span><span class="p">,</span> col<span class="o">=</span><span class="s">&quot;chocolate3&quot;</span><span class="p">)</span>
lines<span class="p">(</span>actors<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> pch<span class="o">=</span><span class="m">8</span><span class="p">,</span> lty<span class="o">=</span><span class="m">1</span><span class="p">,</span> col<span class="o">=</span><span class="s">&quot;orangered2 &quot;</span><span class="p">)</span><span class="o">&lt;/</span>code<span class="o">&gt;&lt;/</span>pre<span class="o">&gt;</span>
</code></pre></div>
<p>For the moment, your chart may looks like this one:</p>

<p><img src='/images/post2/middle-chart.png'/></p>

<p>Great! Our chart is becoming professional. My mon will be proud of me.</p>

<h1 id="third">Third</h1>

<p>The third part is to add both vertical and horizontal lines.</p>

<pre><code>abline(v=1,col=1,lty=3)
abline(v=1.5,col=1,lty=3)
abline(v=2,col=1,lty=3)
abline(v=2.5,col=1,lty=3)
abline(v=3,col=1,lty=3)
abline(v=3.5,col=1,lty=3)
abline(v=4,col=1,lty=3)

abline(h=100,col=1,lty=3)
abline(h=80,col=1,lty=3)
abline(h=60,col=1,lty=3)
abline(h=40,col=1,lty=3)
abline(h=20,col=1,lty=3)
</code></pre>

<p>Note that, we first add the vertical lines, and then, the horizontal lines. We differ each other by the first parameter (<code>v</code> for vertical lines and <code>h</code> for horizontal lines). The second parameter, as you might guess, is the color of the line, and the last one is the line type. Line types can either be specified as an integer (0=blank, 1=solid, ...) or as one of the character strings &quot;blank&quot;, &quot;solid&quot;, etc.</p>

<h1 id="fourth">Fourth</h1>

<p>The fourth and finally part is to plot a box with the lines information. To this, you will need two functions: <code>box</code> and <code>legend</code>. I think the name of these functions are meaningful. But, the <code>legend</code> function receives several parameters.</p>

<pre><code>box()
labels <- c("Sequential","Thread", "Executors", "ForkJoin", "Scala Actors")
colors <- c("blue","darkred", "purple", "chocolate3", "orangered2")
pch <- c(18,23,24,25,8)

legend(1.0, 50, labels, cex=0.8, col=colors, pch=phc, lty=1,bg = "white");
</code></pre>

<p>And you&#39;ll probably see a very similar chart like the second topmost in this post. All code is pasted <a href="https://gist.github.com/gustavopinto/5570951">here</a>. And, that is it! :-)</p>

<p>See you later alligator!</p>



<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//gustavopinto.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<div class="end-of-post">
</div>

<div class="footer">
        <a href="https://github.com/seananderson/seananderson.github.com">Template written by
Sean C. Anderson</a>
    <span class="mastdiv">/</span>
        <a href="/feed.xml">RSS</a>
    <span class="mastdiv">/</span>
        <a href="http://creativecommons.org/licenses/by-nc/3.0/deed.en_US">CC BY-NC Licensed</a>
</div>

</div>
</div>
</div><!-- container -->

<!-- End Document
================================================== -->
<script type="text/javascript" src="/js/retina.js"></script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-465334-5");
  pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
</html>

